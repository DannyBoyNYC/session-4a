<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>START</title>
</head>

<body>
  <a href="#">Slacker</a>
  <div id="app"></div>
  
  <script>

  var elem = document.querySelector('#app');
  var link = document.querySelector('a');

  link.addEventListener('click', getData);

  function getData(){
    console.log('boo');
    requestApi();
    event.preventDefault();
  }

  function requestApi(url) {
  var request = new XMLHttpRequest();
  request.onreadystatechange = function () {
    // Only run if the request is complete
    if (request.readyState !== 4) return;
    
    // Process our return data
    if (request.status >= 200 && request.status < 300) {
      // Success!
      renderApi(request);
    } else if (request.status === 0) {
      console.log(request.status);
      // Request failed
      console.log('boo hoo')
      renderApi(request);
    }
  };
  request.open('GET', 'https://localhost:3001/api/recipes')
  request.send();
}

function renderApi(data) {
  var content = JSON.stringify(data )
  console.log(content)
  // var content = (JSON.parse(data.responseText));
  // var stories = content.results.slice(0, limit);
  // //NEW
  // const htmlFrag = stories.map(story => `
  //   <div class="entry">
  //   <div>
  //     <img src="${story.multimedia[0].url}" /> 
  //     <h3><a target="_blank" href="${story.short_url}">${story.title}</a></h3>
  //   </div>
  //   <p>${story.abstract}</p>
  //   </div>
  // `).join('')
  // elem.innerHTML = htmlFrag;
}

// requestApi();

  </script>
</body>

</html>